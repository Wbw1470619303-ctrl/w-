-- 假跳墙脚本（修复版）
GeneralTab:Button({
    Title = "假跳墙",
    Callback = function()
        -- 尝试多个可能的链接，因为GitHub Raw有时不稳定
        local possibleUrls = {
            "https://raw.githubusercontent.com/ScpGuest666/Random-Roblox-script/main/Roblox%20WallHop%20V4%20script",
            "https://raw.githubusercontent.com/ScpGuest666/Random-Roblox-script/refs/heads/main/Roblox%20WallHop%20V4%20script",
            "https://github.com/ScpGuest666/Random-Roblox-script/raw/main/Roblox%20WallHop%20V4%20script"
        }
        
        local wallhopScript = nil
        local success = false
        
        -- 尝试所有可能的URL
        for i, url in ipairs(possibleUrls) do
            success, wallhopScript = pcall(function()
                return game:HttpGet(url, true)
            end)
            if success and wallhopScript and #wallhopScript > 100 then -- 检查脚本长度确保不是错误页面
                break
            end
        end
        
        if not success or not wallhopScript then
            WindUI:Notify({ 
                Title = "加载失败", 
                Content = "所有假跳墙脚本链接都无法访问\n请检查网络或稍后重试", 
                Duration = 5 
            })
            return
        end
        
        -- 检查脚本内容是否有效
        if #wallhopScript < 100 then
            WindUI:Notify({ 
                Title = "内容错误", 
                Content = "获取的脚本内容过短，可能是错误页面", 
                Duration = 3 
            })
            return
        end
        
        -- 执行脚本并捕获详细错误
        local execSuccess, err = pcall(function()
            local loadedFunction = loadstring(wallhopScript)
            if loadedFunction then
                loadedFunction()
            else
                error("loadstring返回nil，脚本语法错误")
            end
        end)
        
        if execSuccess then
            WindUI:Notify({ 
                Title = "加载成功", 
                Content = "假跳墙脚本已执行\n按指定键位使用（通常是空格+方向键）", 
                Duration = 5 
            })
        else
            -- 显示具体错误信息
            local errorMsg = tostring(err)
            if string.find(errorMsg, "Http requests are not enabled") then
                WindUI:Notify({ 
                    Title = "Delta设置问题", 
                    Content = "请在Delta设置中启用HTTP请求", 
                    Duration = 5 
                })
            elseif string.find(errorMsg, "attempt to call a nil value") then
                WindUI:Notify({ 
                    Title = "脚本不兼容", 
                    Content = "假跳墙脚本与当前游戏不兼容", 
                    Duration = 3 
                })
            else
                WindUI:Notify({ 
                    Title = "执行失败", 
                    Content = "错误: " .. string.sub(errorMsg, 1, 50) .. "...", 
                    Duration = 5 
                })
            end
            print("假跳墙脚本错误详情:", err)
        end
    end
})
