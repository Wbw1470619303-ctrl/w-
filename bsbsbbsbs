-- Fluent UI + è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½ èåˆè„šæœ¬
-- ç¬¬ä¸€æ­¥ï¼šåŠ è½½ç¿»è¯‘æ ¸å¿ƒæ¨¡å—
local Translations = {
    ["AxiosHub"] = "è¶…çº§é»‘æ´",
    ["Lock"] = "é”å®š",
    ["Main"] = "ä¸»ç•Œé¢",
    ["Player Target"] = "ç©å®¶ç›®æ ‡",
    ["UI Settings"] = "UIè®¾ç½®",
    ["Shape Controls"] = "å½¢çŠ¶æ§åˆ¶",
    ["Enable Shape"] = "å¯ç”¨å½¢çŠ¶",
    ["Shape Type"] = "å½¢çŠ¶ç±»å‹",
    ["Fibonacci Sphere"] = "æ–æ³¢é‚£å¥‘çƒä½“",
    ["Star"] = "æ˜Ÿå½¢",
    ["Swastika"] = "åå­—å½¢",
    ["Stack"] = "å †å ",
    ["Size"] = "å¤§å°",
    ["Rotation Speed"] = "æ—‹è½¬é€Ÿåº¦",
    ["Distance from Player"] = "ä¸ç©å®¶è·ç¦»",
    ["Logic"] = "é€»è¾‘",
    ["Target Player"] = "ç›®æ ‡ç©å®¶",
    ["Follow Target"] = "è·Ÿéšç›®æ ‡",
    ["Select Player"] = "é€‰æ‹©ç©å®¶",
    ["Teleport to Target"] = "ä¼ é€åˆ°ç›®æ ‡",
    ["Toggle"] = "åˆ‡æ¢",
    ["version: 2.0"] = "ç‰ˆæœ¬ï¼š2.0",
    -- æ–°å¢ Fluent UI æ§ä»¶æ–‡æœ¬ç¿»è¯‘ï¼ˆå¯é€‰æ‰©å±•ï¼‰
    ["Button"] = "æŒ‰é’®",
    ["Toggle"] = "å¼€å…³",
    ["Slider"] = "æ»‘åŠ¨æ¡",
    ["Dropdown"] = "ä¸‹æ‹‰èœå•",
    ["Colorpicker"] = "é¢œè‰²é€‰æ‹©å™¨",
    ["Keybind"] = "æŒ‰é”®ç»‘å®š",
    ["Input"] = "è¾“å…¥æ¡†",
    ["Paragraph"] = "æ®µè½æ–‡æœ¬"
}

-- ç¿»è¯‘æ ¸å¿ƒå‡½æ•°
local function translateText(text)
    if not text or type(text) ~= "string" then return text end
    -- ç²¾ç¡®åŒ¹é…ç¿»è¯‘
    if Translations[text] then
        return Translations[text]
    end
    -- æ¨¡ç³ŠåŒ¹é…ç¿»è¯‘ï¼ˆåŒ…å«ç›®æ ‡æ–‡æœ¬çš„éƒ½æ›¿æ¢ï¼‰
    for en, cn in pairs(Translations) do
        if text:find(en) then
            return text:gsub(en, cn)
        end
    end
    return text
end

-- å…¨å±€ç¿»è¯‘å¼•æ“åˆå§‹åŒ–ï¼ˆç§»æ¤æ ¸å¿ƒé€»è¾‘ï¼‰
local function setupTranslationEngine()
    local success, err = pcall(function()
        -- å°è¯•é€šè¿‡å…ƒè¡¨åŠ«æŒå®ç°å®æ—¶ç¿»è¯‘ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
        local oldIndex = getrawmetatable(game).__newindex
        setreadonly(getrawmetatable(game), false)
        
        getrawmetatable(game).__newindex = newcclosure(function(t, k, v)
            -- åªç¿»è¯‘æ–‡æœ¬æ§ä»¶çš„ Text å±æ€§
            if (t:IsA("TextLabel") or t:IsA("TextButton") or t:IsA("TextBox")) and k == "Text" then
                v = translateText(tostring(v))
            end
            return oldIndex(t, k, v)
        end)
        
        setreadonly(getrawmetatable(game), true)
        print("[ç¿»è¯‘å¼•æ“] å…ƒè¡¨åŠ«æŒæˆåŠŸï¼Œå®æ—¶ç¿»è¯‘å·²å¯ç”¨")
    end)

    -- é™çº§æ–¹æ¡ˆï¼šæ‰«æå·²æœ‰æ§ä»¶ + ç›‘å¬æ–°æ§ä»¶ï¼ˆå…¼å®¹æ‰€æœ‰ç¯å¢ƒï¼‰
    if not success then
        warn("[ç¿»è¯‘å¼•æ“] å…ƒè¡¨åŠ«æŒå¤±è´¥ï¼Œå¯ç”¨é™çº§æ–¹æ¡ˆ:", err)
        
        local translated = {}
        -- æ‰«æå¹¶ç¿»è¯‘å·²æœ‰æ–‡æœ¬æ§ä»¶
        local function scanAndTranslate()
            -- ç¿»è¯‘ CoreGui ä¸­çš„æ§ä»¶
            for _, gui in ipairs(game:GetService("CoreGui"):GetDescendants()) do
                if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                    pcall(function()
                        local text = gui.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                gui.Text = translatedText
                                translated[gui] = true
                            end
                        end
                    end)
                end
            end
            -- ç¿»è¯‘ PlayerGui ä¸­çš„æ§ä»¶
            local player = game:GetService("Players").LocalPlayer
            if player and player:FindFirstChild("PlayerGui") then
                for _, gui in ipairs(player.PlayerGui:GetDescendants()) do
                    if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                        pcall(function()
                            local text = gui.Text
                            if text and text ~= "" then
                                local translatedText = translateText(text)
                                if translatedText ~= text then
                                    gui.Text = translatedText
                                    translated[gui] = true
                                end
                            end
                        end)
                    end
                end
            end
        end

        -- ç›‘å¬æ–°åˆ›å»ºçš„æ–‡æœ¬æ§ä»¶
        local function setupDescendantListener(parent)
            parent.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                    task.wait(0.1)
                    pcall(function()
                        local text = descendant.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                descendant.Text = translatedText
                            end
                        end)
                    end)
                end
            end)
        end

        -- å¯åŠ¨ç›‘å¬
        pcall(setupDescendantListener, game:GetService("CoreGui"))
        local player = game:GetService("Players").LocalPlayer
        if player and player:FindFirstChild("PlayerGui") then
            pcall(setupDescendantListener, player.PlayerGui)
        end

        -- å®šæ—¶æ‰«ææœªç¿»è¯‘çš„æ§ä»¶
        task.spawn(function()
            while true do
                scanAndTranslate()
                task.wait(3)
            end
        end)
    end
end

-- ç¬¬äºŒæ­¥ï¼šåŠ è½½ Fluent UI åŠå…¶æ’ä»¶ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼‰
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨ç¿»è¯‘å¼•æ“ï¼ˆå»¶è¿Ÿ2ç§’ç¡®ä¿ UI åŠ è½½å®Œæˆï¼‰
task.wait(2)
setupTranslationEngine()

-- ç¬¬å››æ­¥ï¼šåˆ›å»º Fluent UI çª—å£ï¼ˆä¿ç•™åŸæœ‰æ‰€æœ‰åŠŸèƒ½ï¼‰
local Window = Fluent:CreateWindow({
    Title = "Fluent UI æ§ä»¶æ¼”ç¤º " .. Fluent.Version,
    SubTitle = "å±•ç¤ºæ‰€æœ‰æ”¯æŒçš„UIæ§ä»¶ + è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½",
    TabWidth = 160,
    Size = UDim2.fromOffset(600, 500),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl
})

-- å®šä¹‰æ‰€æœ‰æ ‡ç­¾é¡µ
local Tabs = {
    Welcome = Window:AddTab({ Title = "æ¬¢è¿é¡µé¢", Icon = "home" }),
    BasicControls = Window:AddTab({ Title = "åŸºç¡€æ§ä»¶", Icon = "sliders" }),
    AdvancedControls = Window:AddTab({ Title = "é«˜çº§æ§ä»¶", Icon = "settings" }),
    InputControls = Window:AddTab({ Title = "è¾“å…¥æ§ä»¶", Icon = "edit" }),
    Settings = Window:AddTab({ Title = "è®¾ç½®", Icon = "settings" }),
    Translation = Window:AddTab({ Title = "ç¿»è¯‘è®¾ç½®", Icon = "language" }) -- æ–°å¢ç¿»è¯‘è®¾ç½®æ ‡ç­¾é¡µ
}

local Options = Fluent.Options

-- ==================== åŸæœ‰æ ‡ç­¾é¡µåŠŸèƒ½ï¼ˆå®Œå…¨ä¿ç•™ï¼‰====================
-- æ¬¢è¿é¡µé¢
do
    Tabs.Welcome:AddParagraph({
        Title = "ğŸ¯ Fluent UI æ§ä»¶æ¼”ç¤º + è‡ªåŠ¨ç¿»è¯‘",
        Content = "è¿™ä¸ªè„šæœ¬å±•ç¤ºäº† Fluent UI æ”¯æŒçš„æ‰€æœ‰æ§ä»¶ç±»å‹ï¼ŒåŒæ—¶è‡ªåŠ¨ç¿»è¯‘å…¨å±€æ–‡æœ¬ã€‚\næ‰€æœ‰æ§ä»¶éƒ½åªç”¨äºæ¼”ç¤ºï¼Œç¿»è¯‘åŠŸèƒ½è‡ªåŠ¨ç”Ÿæ•ˆã€‚"
    })
    Tabs.Welcome:AddParagraph({
        Title = "ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½",
        Content = "â€¢ è‡ªåŠ¨ç¿»è¯‘ï¼šå…¨å±€ TextLabel/TextButton/TextBox æ–‡æœ¬\nâ€¢ æ”¯æŒç²¾ç¡®åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…\nâ€¢ å…¼å®¹ Fluent UI æ‰€æœ‰æ§ä»¶\nâ€¢ å¤±è´¥é™çº§æ–¹æ¡ˆï¼Œç¡®ä¿åŠŸèƒ½å¯ç”¨"
    })
    Tabs.Welcome:AddButton({
        Title = "æµ‹è¯•é€šçŸ¥ç³»ç»Ÿ",
        Description = "ç‚¹å‡»å‘é€æµ‹è¯•é€šçŸ¥",
        Callback = function()
            Fluent:Notify({
                Title = "é€šçŸ¥æµ‹è¯•",
                Content = "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é€šçŸ¥ï¼",
                SubContent = "é€šçŸ¥ç³»ç»Ÿå·¥ä½œæ­£å¸¸ + ç¿»è¯‘åŠŸèƒ½å·²å¯ç”¨",
                Duration = 5
            })
        end
    })
    Tabs.Welcome:AddButton({
        Title = "æµ‹è¯•å¯¹è¯æ¡†",
        Description = "ç‚¹å‡»æ‰“å¼€æµ‹è¯•å¯¹è¯æ¡†",
        Callback = function()
            Window:Dialog({
                Title = "å¯¹è¯æ¡†æ¼”ç¤º",
                Content = "è¿™æ˜¯ä¸€ä¸ªå¯¹è¯æ¡†ç»„ä»¶æ¼”ç¤ºã€‚è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½å·²è¦†ç›–æ­¤æ–‡æœ¬ã€‚",
                Buttons = {
                    {
                        Title = "ç¡®è®¤",
                        Callback = function()
                            print("[å¯¹è¯æ¡†] ç¡®è®¤æŒ‰é’®è¢«ç‚¹å‡»")
                            Fluent:Notify({
                                Title = "æ“ä½œç¡®è®¤",
                                Content = "ç¡®è®¤æ“ä½œå·²æ‰§è¡Œ",
                                Duration = 3
                            })
                        end
                    },
                    {
                        Title = "å–æ¶ˆ",
                        Callback = function()
                            print("[å¯¹è¯æ¡†] å–æ¶ˆæŒ‰é’®è¢«ç‚¹å‡»")
                            Fluent:Notify({
                                Title = "æ“ä½œå–æ¶ˆ",
                                Content = "æ“ä½œå·²å–æ¶ˆ",
                                Duration = 3
                            })
                        end
                    },
                    {
                        Title = "ä¸­ç«‹",
                        Callback = function()
                            print("[å¯¹è¯æ¡†] ä¸­ç«‹æŒ‰é’®è¢«ç‚¹å‡»")
                        end
                    }
                }
            })
        end
    })
end

-- åŸºç¡€æ§ä»¶æ ‡ç­¾é¡µï¼ˆå®Œå…¨ä¿ç•™åŸæœ‰åŠŸèƒ½ï¼‰
do
    Tabs.BasicControls:AddParagraph({
        Title = "åŸºç¡€æ§ä»¶æ¼”ç¤º",
        Content = "è¿™äº›æ˜¯æœ€å¸¸ç”¨çš„åŸºç¡€äº¤äº’æ§ä»¶"
    })
    local DemoSwitch1 = Tabs.BasicControls:AddToggle("BasicToggle1", {
        Title = "åŸºç¡€å¼€å…³",
        Description = "è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å¼€å…³æ§ä»¶",
        Default = false
    })
    DemoSwitch1:OnChanged(function()
        print("[å¼€å…³1] çŠ¶æ€:", Options.BasicToggle1.Value)
    end)
    local DemoSwitch2 = Tabs.BasicControls:AddToggle("BasicToggle2", {
        Title = "é»˜è®¤å¼€å¯çš„å¼€å…³",
        Description = "è¿™ä¸ªå¼€å…³é»˜è®¤æ˜¯å¼€å¯çŠ¶æ€",
        Default = true
    })
    DemoSwitch2:OnChanged(function()
        print("[å¼€å…³2] çŠ¶æ€:", Options.BasicToggle2.Value)
    end)
    local Slider1 = Tabs.BasicControls:AddSlider("BasicSlider1", {
        Title = "åŸºç¡€æ»‘åŠ¨æ¡",
        Description = "æ‹–åŠ¨è°ƒæ•´æ•°å€¼ (0-100)",
        Default = 50,
        Min = 0,
        Max = 100,
        Rounding = 1,
        Callback = function(Value)
            print("[æ»‘åŠ¨æ¡1] æ•°å€¼:", Value)
        end
    })
    local Slider2 = Tabs.BasicControls:AddSlider("BasicSlider2", {
        Title = "å°æ•°æ»‘åŠ¨æ¡",
        Description = "æ”¯æŒå°æ•°ç²¾åº¦ (0.0-10.0)",
        Default = 5.5,
        Min = 0,
        Max = 10,
        Rounding = 1,
        Callback = function(Value)
            print("[æ»‘åŠ¨æ¡2] æ•°å€¼:", Value)
        end
    })
    local Slider3 = Tabs.BasicControls:AddSlider("BasicSlider3", {
        Title = "å¤§èŒƒå›´æ»‘åŠ¨æ¡",
        Description = "å¤§æ•°å€¼èŒƒå›´ (0-1000)",
        Default = 250,
        Min = 0,
        Max = 1000,
        Rounding = 0,
        Callback = function(Value)
            print("[æ»‘åŠ¨æ¡3] æ•°å€¼:", Value)
        end
    })
    Tabs.BasicControls:AddButton({
        Title = "ä¸»è¦æŒ‰é’®",
        Description = "è¿™æ˜¯ä¸€ä¸ªä¸»è¦æ“ä½œæŒ‰é’®",
        Callback = function()
            print("[æŒ‰é’®] ä¸»è¦æŒ‰é’®è¢«ç‚¹å‡»")
            Fluent:Notify({
                Title = "æŒ‰é’®ç‚¹å‡»",
                Content = "ä¸»è¦æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼",
                Duration = 2
            })
        end
    })
    Tabs.BasicControls:AddButton({
        Title = "æ¬¡è¦æŒ‰é’®",
        Description = "è¿™æ˜¯ä¸€ä¸ªæ¬¡è¦æ“ä½œæŒ‰é’®",
        Callback = function()
            print("[æŒ‰é’®] æ¬¡è¦æŒ‰é’®è¢«ç‚¹å‡»")
        end
    })
end

-- é«˜çº§æ§ä»¶æ ‡ç­¾é¡µï¼ˆå®Œå…¨ä¿ç•™åŸæœ‰åŠŸèƒ½ï¼‰
do
    Tabs.AdvancedControls:AddParagraph({
        Title = "é«˜çº§æ§ä»¶æ¼”ç¤º",
        Content = "è¿™äº›æ˜¯æ›´å¤æ‚çš„äº¤äº’æ§ä»¶"
    })
    local SingleDropdown = Tabs.AdvancedControls:AddDropdown("SingleDropdown", {
        Title = "å•é€‰ä¸‹æ‹‰èœå•",
        Description = "åªèƒ½é€‰æ‹©ä¸€ä¸ªé€‰é¡¹",
        Values = {"é€‰é¡¹A", "é€‰é¡¹B", "é€‰é¡¹C", "é€‰é¡¹D", "é€‰é¡¹E"},
        Multi = false,
        Default = "é€‰é¡¹A",
    })
    SingleDropdown:OnChanged(function(Value)
        print("[ä¸‹æ‹‰èœå•] é€‰æ‹©äº†:", Value)
    end)
    local MultiDropdown = Tabs.AdvancedControls:AddDropdown("MultiDropdown", {
        Title = "å¤šé€‰ä¸‹æ‹‰èœå•",
        Description = "å¯ä»¥é€‰æ‹©å¤šä¸ªé€‰é¡¹",
        Values = {"çº¢è‰²", "ç»¿è‰²", "è“è‰²", "é»„è‰²", "ç´«è‰²", "æ©™è‰²", "ç²‰è‰²"},
        Multi = true,
        Default = {"çº¢è‰²", "è“è‰²"},
    })
    MultiDropdown:OnChanged(function(Value)
        local selected = {}
        for option, enabled in pairs(Value) do
            if enabled then
                table.insert(selected, option)
            end
        end
        print("[å¤šé€‰ä¸‹æ‹‰] é€‰æ‹©äº†:", table.concat(selected, ", "))
    end)
    local BasicColorpicker = Tabs.AdvancedControls:AddColorpicker("BasicColorpicker", {
        Title = "åŸºç¡€é¢œè‰²é€‰æ‹©å™¨",
        Description = "é€‰æ‹©é¢œè‰²",
        Default = Color3.fromRGB(96, 205, 255)
    })
    BasicColorpicker:OnChanged(function()
        print("[é¢œè‰²é€‰æ‹©å™¨] é¢œè‰²:", Options.BasicColorpicker.Value)
    end)
    local TransparencyColorpicker = Tabs.AdvancedControls:AddColorpicker("TransparencyColorpicker", {
        Title = "é€æ˜åº¦é¢œè‰²é€‰æ‹©å™¨",
        Description = "å¯ä»¥è°ƒæ•´é¢œè‰²å’Œé€æ˜åº¦",
        Transparency = 0.5,
        Default = Color3.fromRGB(255, 100, 100)
    })
    TransparencyColorpicker:OnChanged(function()
        print("[é€æ˜é¢œè‰²] é¢œè‰²:", Options.TransparencyColorpicker.Value, "é€æ˜åº¦:", Options.TransparencyColorpicker.Transparency)
    end)
    local ToggleKeybind = Tabs.AdvancedControls:AddKeybind("ToggleKeybind", {
        Title = "åˆ‡æ¢æ¨¡å¼æŒ‰é”®",
        Mode = "Toggle",
        Default = "Q",
        Callback = function(Value)
            print("[æŒ‰é”®ç»‘å®š-åˆ‡æ¢] çŠ¶æ€:", Value)
        end,
        ChangedCallback = function(New)
            print("[æŒ‰é”®ç»‘å®š] æŒ‰é”®æ”¹ä¸º:", New)
        end
    end)
    local HoldKeybind = Tabs.AdvancedControls:AddKeybind("HoldKeybind", {
        Title = "æŒ‰ä½æ¨¡å¼æŒ‰é”®",
        Mode = "Hold",
        Default = "F",
        Callback = function(Value)
            print("[æŒ‰é”®ç»‘å®š-æŒ‰ä½] çŠ¶æ€:", Value)
        end
    end)
    local AlwaysKeybind = Tabs.AdvancedControls:AddKeybind("AlwaysKeybind", {
        Title = "æ€»æ˜¯è§¦å‘æŒ‰é”®",
        Mode = "Always",
        Default = "G",
        Callback = function(Value)
            print("[æŒ‰é”®ç»‘å®š-æ€»æ˜¯] çŠ¶æ€:", Value)
        end
    })
    task.spawn(function()
        while task.wait(1) do
            local toggleState = ToggleKeybind:GetState()
            local holdState = HoldKeybind:GetState()
            local alwaysState = AlwaysKeybind:GetState()
            print(string.format("[æŒ‰é”®çŠ¶æ€] åˆ‡æ¢:%s æŒ‰ä½:%s æ€»æ˜¯:%s",
                tostring(toggleState), tostring(holdState), tostring(alwaysState)))
        end
    end)
end

-- è¾“å…¥æ§ä»¶æ ‡ç­¾é¡µï¼ˆå®Œå…¨ä¿ç•™åŸæœ‰åŠŸèƒ½ï¼‰
do
    Tabs.InputControls:AddParagraph({
        Title = "è¾“å…¥æ§ä»¶æ¼”ç¤º",
        Content = "å„ç§æ–‡æœ¬å’Œæ•°å­—è¾“å…¥æ§ä»¶"
    })
    local TextInput = Tabs.InputControls:AddInput("TextInput", {
        Title = "æ–‡æœ¬è¾“å…¥æ¡†",
        Default = "é»˜è®¤æ–‡æœ¬",
        Placeholder = "åœ¨è¿™é‡Œè¾“å…¥æ–‡å­—...",
        Numeric = false,
        Finished = false,
        Callback = function(Value)
            print("[æ–‡æœ¬è¾“å…¥] å†…å®¹:", Value)
        end
    })
    local RealtimeInput = Tabs.InputControls:AddInput("RealtimeInput", {
        Title = "å®æ—¶æ–‡æœ¬è¾“å…¥",
        Default = "",
        Placeholder = "è¾“å…¥æ—¶å®æ—¶è§¦å‘...",
        Numeric = false,
        Finished = false,
        Callback = function(Value)
            print("[å®æ—¶è¾“å…¥] å†…å®¹:", Value)
        end
    })
    local NumericInput = Tabs.InputControls:AddInput("NumericInput", {
        Title = "æ•°å­—è¾“å…¥æ¡†",
        Default = "100",
        Placeholder = "åªèƒ½è¾“å…¥æ•°å­—...",
        Numeric = true,
        Finished = true,
        Callback = function(Value)
            print("[æ•°å­—è¾“å…¥] æ•°å€¼:", tonumber(Value))
        end
    })
    local FinishedInput = Tabs.InputControls:AddInput("FinishedInput", {
        Title = "å®Œæˆæ—¶è¾“å…¥æ¡†",
        Default = "",
        Placeholder = "æŒ‰å›è½¦å®Œæˆè¾“å…¥...",
        Numeric = false,
        Finished = true,
        Callback = function(Value)
            print("[å®Œæˆè¾“å…¥] æœ€ç»ˆå†…å®¹:", Value)
            Fluent:Notify({
                Title = "è¾“å…¥å®Œæˆ",
                Content = "è¾“å…¥å†…å®¹: " .. Value,
                Duration = 3
            })
        end
    })
    Tabs.InputControls:AddParagraph({
        Title = "è¾“å…¥æç¤º",
        Content = "æ³¨æ„è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒè¾“å…¥æ–¹å¼çš„è§¦å‘æ—¶æœºå’Œå†…å®¹ã€‚"
    })
    Tabs.InputControls:AddButton({
        Title = "æ¸…ç©ºæ‰€æœ‰è¾“å…¥",
        Description = "æ¸…ç©ºå½“å‰é¡µé¢çš„æ‰€æœ‰è¾“å…¥æ¡†",
        Callback = function()
            TextInput:SetValue("")
            RealtimeInput:SetValue("")
            NumericInput:SetValue("")
            FinishedInput:SetValue("")
            print("[æ“ä½œ] æ‰€æœ‰è¾“å…¥æ¡†å·²æ¸…ç©º")
            Fluent:Notify({
                Title = "æ¸…ç©ºå®Œæˆ",
                Content = "æ‰€æœ‰è¾“å…¥æ¡†å†…å®¹å·²æ¸…ç©º",
                Duration = 2
            })
        end
    })
end

-- è®¾ç½®æ ‡ç­¾é¡µï¼ˆå®Œå…¨ä¿ç•™åŸæœ‰åŠŸèƒ½ï¼‰
do
    Tabs.Settings:AddParagraph({
        Title = "ç•Œé¢è®¾ç½®",
        Content = "é…ç½®ç•Œé¢å¤–è§‚å’Œè¡Œä¸º"
    })
    local ThemeDropdown = Tabs.Settings:AddDropdown("InterfaceTheme", {
        Title = "ç•Œé¢ä¸»é¢˜",
        Description = "é€‰æ‹©ç•Œé¢é¢œè‰²ä¸»é¢˜",
        Values = Fluent.Themes,
        Multi = false,
        Default = "Dark",
    })
    ThemeDropdown:OnChanged(function()
        Fluent:SetTheme(Options.InterfaceTheme.Value)
        print("[è®¾ç½®] ä¸»é¢˜æ”¹ä¸º:", Options.InterfaceTheme.Value)
    end)
    local AcrylicToggle = Tabs.Settings:AddToggle("AcrylicToggle", {
        Title = "æ¯›ç»ç’ƒæ•ˆæœ",
        Description = "å¯ç”¨/ç¦ç”¨èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ",
        Default = true
    })
    AcrylicToggle:OnChanged(function()
        Fluent:ToggleAcrylic(Options.AcrylicToggle.Value)
        print("[è®¾ç½®] æ¯›ç»ç’ƒæ•ˆæœ:", Options.AcrylicToggle.Value)
    end)
    local TransparencyToggle = Tabs.Settings:AddToggle("TransparencyToggle", {
        Title = "é€æ˜æ•ˆæœ",
        Description = "å¯ç”¨/ç¦ç”¨ç•Œé¢é€æ˜æ•ˆæœ",
        Default = true
    })
    TransparencyToggle:OnChanged(function()
        Fluent:ToggleTransparency(Options.TransparencyToggle.Value)
        print("[è®¾ç½®] é€æ˜æ•ˆæœ:", Options.TransparencyToggle.Value)
    end)
    Tabs.Settings:AddParagraph({
        Title = "é…ç½®ç®¡ç†",
        Content = "è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½ç•Œé¢è®¾ç½®"
    })
    SaveManager:SetLibrary(Fluent)
    InterfaceManager:SetLibrary(Fluent)
    SaveManager:IgnoreThemeSettings()
    SaveManager:SetIgnoreIndexes({})
    InterfaceManager:SetFolder("FluentDemo")
    SaveManager:SetFolder("FluentDemo/" .. tostring(game.PlaceId))
    InterfaceManager:BuildInterfaceSection(Tabs.Settings)
    SaveManager:BuildConfigSection(Tabs.Settings)
    Tabs.Settings:AddButton({
        Title = "é‡ç½®æ§åˆ¶å°",
        Description = "æ¸…ç©ºæ§åˆ¶å°è¾“å‡ºï¼ˆåœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­ï¼‰",
        Callback = function()
            print("\n\n\n========== æ§åˆ¶å°å·²æ¸…ç©º ==========\n\n\n")
            Fluent:Notify({
                Title = "æ§åˆ¶å°é‡ç½®",
                Content = "è¯·æŸ¥çœ‹å¼€å‘è€…æ§åˆ¶å°",
                Duration = 2
            })
        end
    })
end

-- ==================== æ–°å¢ï¼šç¿»è¯‘è®¾ç½®æ ‡ç­¾é¡µ ====================
do
    Tabs.Translation:AddParagraph({
        Title = "ğŸŒ è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½è®¾ç½®",
        Content = "å½“å‰å·²åŠ è½½ " .. #Translations .. " æ¡ç¿»è¯‘è§„åˆ™\næ”¯æŒå…¨å±€æ–‡æœ¬æ§ä»¶è‡ªåŠ¨ç¿»è¯‘ï¼ŒåŒ…å«ï¼š\nâ€¢ CoreGui ç³»ç»Ÿæ§ä»¶\nâ€¢ PlayerGui æ¸¸æˆæ§ä»¶\nâ€¢ Fluent UI æ§ä»¶æ–‡æœ¬"
    })

    -- æ‰‹åŠ¨è§¦å‘ç¿»è¯‘æŒ‰é’®
    Tabs.Translation:AddButton({
        Title = "æ‰‹åŠ¨è§¦å‘ç¿»è¯‘",
        Description = "ç«‹å³æ‰«æå¹¶ç¿»è¯‘æ‰€æœ‰æœªç¿»è¯‘çš„æ–‡æœ¬",
        Callback = function()
            local translatedCount = 0
            local totalCount = 0
            -- æ‰«ææ‰€æœ‰æ–‡æœ¬æ§ä»¶
            local function countAndTranslate(parent)
                for _, gui in ipairs(parent:GetDescendants()) do
                    if gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox") then
                        totalCount = totalCount + 1
                        local original = gui.Text
                        local translated = translateText(original)
                        if translated ~= original then
                            gui.Text = translated
                            translatedCount = translatedCount + 1
                        end
                    end
                end
            end
            countAndTranslate(game:GetService("CoreGui"))
            local player = game:GetService("Players").LocalPlayer
            if player and player.PlayerGui then
                countAndTranslate(player.PlayerGui)
            end
            Fluent:Notify({
                Title = "ç¿»è¯‘å®Œæˆ",
                Content = "å…±æ‰«æ " .. totalCount .. " ä¸ªæ–‡æœ¬æ§ä»¶ï¼Œç¿»è¯‘ " .. translatedCount .. " ä¸ª",
                Duration = 3
            })
        end
    })

    -- æŸ¥çœ‹ç¿»è¯‘åˆ—è¡¨æŒ‰é’®
    Tabs.Translation:AddButton({
        Title = "æŸ¥çœ‹ç¿»è¯‘åˆ—è¡¨",
        Description = "åœ¨æ§åˆ¶å°æ‰“å°æ‰€æœ‰ç¿»è¯‘è§„åˆ™",
        Callback = function()
            print("\n\n========== ç¿»è¯‘è§„åˆ™åˆ—è¡¨ ==========")
            for en, cn in pairs(Translations) do
                print(string.format("%-20s â†’ %s", en, cn))
            end
            print("================================\n\n")
            Fluent:Notify({
                Title = "åˆ—è¡¨å·²æ‰“å°",
                Content = "è¯·æŸ¥çœ‹å¼€å‘è€…æ§åˆ¶å° (F9)",
                Duration = 2
            })
        end
    })
end

-- ==================== è„šæœ¬åˆå§‹åŒ– ====================
do
    Window:SelectTab(1)
    SaveManager:LoadAutoloadConfig()
    -- å¯åŠ¨æ¬¢è¿é€šçŸ¥ï¼ˆåŒ…å«ç¿»è¯‘åŠŸèƒ½æç¤ºï¼‰
    Fluent:Notify({
        Title = "ğŸš€ æ§ä»¶æ¼”ç¤º + è‡ªåŠ¨ç¿»è¯‘å·²åŠ è½½",
        Content = "æ‰€æœ‰UIæ§ä»¶æ¼”ç¤ºå‡†å¤‡å°±ç»ªï¼è‡ªåŠ¨ç¿»è¯‘åŠŸèƒ½å·²å¯ç”¨",
        SubContent = "æ‰“å¼€å¼€å‘è€…æ§åˆ¶å° (F9) æŸ¥çœ‹è¾“å‡º | æŒ‰ RightControl éšè—/æ˜¾ç¤ºç•Œé¢",
        Duration = 8
    })
    print("==========================================")
    print("      Fluent UI æ§ä»¶æ¼”ç¤º + è‡ªåŠ¨ç¿»è¯‘è„šæœ¬")
    print("==========================================")
    print("ç¿»è¯‘åŠŸèƒ½ï¼šå·²åŠ è½½ " .. #Translations .. " æ¡è§„åˆ™")
    print("æ‰€æœ‰æ§ä»¶çš„äº¤äº’éƒ½ä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºè¾“å‡º")
    print("æŒ‰ RightControl é”®éšè—/æ˜¾ç¤ºç•Œé¢")
    print("==========================================")
end

-- è¿”å›èåˆåçš„å¯¹è±¡
return {Fluent = Fluent, Translations = Translations}
