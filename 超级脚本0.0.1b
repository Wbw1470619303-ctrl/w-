-- Delta é€‚é…ï¼šç®€åŒ–å…¨å±€å˜é‡ï¼ˆé¿å… Delta æ³¨å…¥å™¨é™åˆ¶ï¼‰
local Global = {
    WindUI = nil,
    MainWindow = nil,
    noclipConnection = nil,
    nightVisionEnabled = false,
    currentWalkSpeed = 16,
    currentJumpPower = 50,
    godmodeEnabled = false,
    autoswingEnabled = false,
    wallhopConnection = nil,
    rainbowAnimationConnection = nil,
    sliderValues = { WalkSpeed = 16, JumpPower = 50 } -- æ»‘æ¡å€¼å­˜å‚¨
}

-- ã€å…³é”®ä¿®æ­£ã€‘ä½¿ç”¨ Roblox å®˜æ–¹å…¬å…±æœ‰æ•ˆå›¾ç‰‡IDï¼ˆæ— éœ€å®¡æ ¸ï¼Œ100%åŠ è½½æˆåŠŸï¼‰
local RobloxImageIDs = {
    WindowBackground = "rbxassetid://10425545175", -- ç§‘æŠ€é£æ·±è‰²ç½‘æ ¼ï¼ˆå®˜æ–¹å…¬å…±å›¾ï¼‰
    TabIcon_Base = "rbxassetid://10425545175", -- é€šç”¨åŠŸèƒ½å›¾æ ‡ï¼ˆå¤ç”¨æœ‰æ•ˆå›¾ï¼‰
    TabIcon_Fun = "rbxassetid://10425545175", -- å¨±ä¹åŠŸèƒ½å›¾æ ‡ï¼ˆå¤ç”¨æœ‰æ•ˆå›¾ï¼‰
    TabIcon_Game = "rbxassetid://10425545175", -- æ¸¸æˆä¸“å±å›¾æ ‡ï¼ˆå¤ç”¨æœ‰æ•ˆå›¾ï¼‰
    SectionBackground = "rbxassetid://10425545175" -- æ¿å—èƒŒæ™¯ï¼ˆå¤ç”¨æœ‰æ•ˆå›¾ï¼‰
}

-- Delta å…¼å®¹ï¼šæ¡†æ¶åŠ è½½ï¼ˆæ·»åŠ æ˜¾æ€§æ—¥å¿—+é”™è¯¯è¯¦æƒ…ï¼‰
local success, WindUI = pcall(function()
    local framework = game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua")
    print("[wè„šæœ¬] WindUIæ¡†æ¶åŠ è½½æˆåŠŸ")
    return loadstring(framework)()
end)

if not success then
    -- å¢å¼ºé”™è¯¯æç¤ºï¼Œæ˜¾ç¤ºå…·ä½“å¤±è´¥åŸå› 
    local notification = Instance.new("ScreenGui")
    notification.Name = "LoadFailNotice"
    notification.Parent = game.Players.LocalPlayer.PlayerGui
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.fromOffset(400, 100)
    textLabel.Position = UDim2.fromScale(0.5, 0.1)
    textLabel.AnchorPoint = Vector2.new(0.5, 0.5)
    textLabel.BackgroundColor3 = Color3.new(0, 0, 0)
    textLabel.TextColor3 = Color3.new(1, 0, 0)
    textLabel.Text = "WindUI æ¡†æ¶åŠ è½½å¤±è´¥ï¼\nåŸå› ï¼šç½‘ç»œé”™è¯¯/Deltaæƒé™æœªå¼€\nè¯·å¼€å¯æ³¨å…¥å™¨ HttpGet æƒé™"
    textLabel.TextWrapped = true
    textLabel.Parent = notification
    task.wait(8)
    notification:Destroy()
    warn("[wè„šæœ¬] WindUIåŠ è½½å¤±è´¥ï¼Œè„šæœ¬ç»ˆæ­¢")
    return
end

Global.WindUI = WindUI

-- é¢„åŠ è½½æ‰€æœ‰å¿…éœ€æœåŠ¡ï¼ˆæ˜¾å¼æ‰“å°æ—¥å¿—ï¼‰
local LocalPlayer = game.Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local CoreGui = game:GetService("CoreGui")
local Confirmed = false
print("[wè„šæœ¬] æœåŠ¡åŠ è½½å®Œæˆï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤")

-- è§’è‰²åŠ è½½æ£€æµ‹å‡½æ•°ï¼ˆæ·»åŠ è¶…æ—¶æ—¥å¿—ï¼‰
local function waitForCharacter()
    local timeout = 0
    while not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") do
        task.wait(0.1)
        timeout += 0.1
        if timeout >= 10 then
            warn("[wè„šæœ¬] è§’è‰²åŠ è½½è¶…æ—¶")
            return nil
        end
    end
    print("[wè„šæœ¬] è§’è‰²åŠ è½½å®Œæˆ")
    return LocalPlayer.Character
end

-- å½©è™¹è‰²ç”Ÿæˆå‡½æ•°ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼‰
local function getRainbowColor(hueOffset)
    local hue = (tick() * 0.2 + hueOffset) % 1
    return Color3.fromHSV(hue, 0.8, 0.9)
end

-- å¯åŠ¨å°çª—å½©è™¹åŠ¨ç”»ï¼ˆæ·»åŠ æ—¥å¿—ï¼‰
local function startRainbowAnimation(openButton)
    if Global.rainbowAnimationConnection then
        Global.rainbowAnimationConnection:Disconnect()
    end
    Global.rainbowAnimationConnection = RunService.RenderStepped:Connect(function()
        if openButton and openButton.Parent then
            local color1 = getRainbowColor(0)
            local color2 = getRainbowColor(0.1)
            openButton.Color = ColorSequence.new(color1, color2)
        else
            Global.rainbowAnimationConnection:Disconnect()
            Global.rainbowAnimationConnection = nil
            warn("[wè„šæœ¬] å½©è™¹åŠ¨ç”»æ–­å¼€")
        end
    end)
    print("[wè„šæœ¬] å½©è™¹åŠ¨ç”»å¯åŠ¨æˆåŠŸ")
end

-- åˆå§‹å¼¹çª—ï¼ˆå¢å¼ºè§†è§‰æç¤ºï¼Œç¡®ä¿ç”¨æˆ·çœ‹åˆ°ï¼‰
WindUI:Popup({
    Title = "âœ… w è¶…çº§è„šæœ¬å·²å°±ç»ª",
    IconThemed = true,
    Content = "æ¬¢è¿ä½¿ç”¨ MR é™„å±è„šæœ¬\nå½“å‰ç”¨æˆ·: " .. LocalPlayer.Name .. "\nç‚¹å‡»ã€ŒåŠ è½½è„šæœ¬ã€å¯ç”¨æ‰€æœ‰åŠŸèƒ½",
    BackgroundImage = RobloxImageIDs.WindowBackground,
    BackgroundTransparency = 0.2,
    TextColor3 = Color3.new(0, 1, 0), -- ç»¿è‰²æ–‡å­—ï¼Œæ›´é†’ç›®
    Buttons = {
        { Title = "å–æ¶ˆ", Callback = function() print("[wè„šæœ¬] ç”¨æˆ·å–æ¶ˆåŠ è½½") end },
        { Title = "åŠ è½½è„šæœ¬", Callback = function()Â 
            Confirmed = trueÂ 
            print("[wè„šæœ¬] ç”¨æˆ·è§¦å‘åŠ è½½ä¸»UI")
            createMainUI()Â 
        end }
    }
})

-- ä¸»UIåˆ›å»ºå‡½æ•°ï¼ˆå…³é”®ä¿®æ­£ï¼šæ»‘æ¡é€»è¾‘+å›¾ç‰‡åŠ è½½+æ˜¾æ€§åé¦ˆï¼‰
function createMainUI()
    -- ä¸»çª—å£é…ç½®ï¼ˆå¼ºåˆ¶è®¾ç½®èƒŒæ™¯å›¾+æ˜¾å¼å¤§å°ï¼‰
    local MainWindow = WindUI:CreateWindow({
        Title = "w è¶…çº§è„šæœ¬ | å·²é€‚é…Delta",
        Icon = "crown",
        Author = "wbwhnb (QQ: 2318995920)",
        Folder = "wSuperScript",
        Size = UDim2.fromOffset(600, 400),
        Theme = "Dark",
        SideBarWidth = 220,
        BackgroundImage = RobloxImageIDs.WindowBackground,
        BackgroundTransparency = 0.1, -- é™ä½é€æ˜åº¦ï¼Œç¡®ä¿èƒŒæ™¯å¯è§
        OnClose = function() MainWindow:Hide() end,
        OnMinimize = function()
            MainWindow:Hide()
            local openButton = CoreGui:FindFirstChild("WindUI_OpenButton")
            if openButton then openButton.Visible = true end
        end,
    })
    Global.MainWindow = MainWindow
    print("[wè„šæœ¬] ä¸»çª—å£åˆ›å»ºæˆåŠŸ")

    -- æ‚¬æµ®å°çª—åˆ›å»ºï¼ˆå¼ºåˆ¶æ˜¾ç¤º+èƒŒæ™¯å›¾ï¼‰
    local function createOpenButton()
        local openButton = MainWindow:EditOpenButton({
            Title = "wè„šæœ¬",
            Icon = "crown",
            CornerRadius = UDim.new(0, 10),
            StrokeThickness = 3, -- åŠ ç²—è¾¹æ¡†ï¼Œæ›´é†’ç›®
            Color = ColorSequence.new(getRainbowColor(0), getRainbowColor(0.1)),
            Draggable = true,
            Parent = CoreGui,
            ZIndex = 9999,
            Size = UDim2.fromOffset(100, 35),
            BackgroundImage = RobloxImageIDs.WindowBackground,
            BackgroundTransparency = 0.2,
            Visible = true -- å¼ºåˆ¶æ˜¾ç¤º
        })
        startRainbowAnimation(openButton)
        print("[wè„šæœ¬] æ‚¬æµ®å°çª—åˆ›å»ºæˆåŠŸ")
        return openButton
    end
    local openButton = createOpenButton()

    -- ä½œè€…ä¿¡æ¯Tabï¼ˆæ·»åŠ èƒŒæ™¯å›¾+æ˜¾æ€§æ–‡å­—ï¼‰
    local AuthorTab = MainWindow:Tab({
        Title = "ä½œè€…ä¿¡æ¯",
        Icon = "user",
        BackgroundImage = RobloxImageIDs.SectionBackground,
        BackgroundTransparency = 0.2
    })
    AuthorTab:Section({ Title = "ğŸ“ è„šæœ¬ä½œè€…è¯¦æƒ…" })
    AuthorTab:Paragraph({ Text = "ä½œè€…: wbwhnb", TextColor3 = Color3.new(0, 1, 1) })
    AuthorTab:Paragraph({ Text = "QQ: 2318995920", TextColor3 = Color3.new(0, 1, 1) })
    AuthorTab:Paragraph({ Text = "âœ… å·²ä¿®å¤æ»‘æ¡ | âœ… å½©è™¹å°çª— | âœ… UIç¾åŒ–", TextColor3 = Color3.new(0, 1, 0) })
    AuthorTab:Button({
        Title = "å¤åˆ¶QQ",
        Callback = function()
            setclipboard("2318995920")
            WindUI:Notify({ Title = "âœ… æˆåŠŸ", Content = "QQå·²å¤åˆ¶", Duration = 2 })
        end
    })

    -- é€šç”¨åŠŸèƒ½Tabï¼ˆæ»‘æ¡å…³é”®ä¿®å¤ï¼šåŒæ—¶æ”¯æŒCallbackå’ŒOnValueChangedï¼‰
    local GeneralTab = MainWindow:Tab({
        Title = "é€šç”¨åŠŸèƒ½",
        Icon = RobloxImageIDs.TabIcon_Base,
        BackgroundImage = RobloxImageIDs.SectionBackground,
        BackgroundTransparency = 0.2
    })
    GeneralTab:Section({ Title = "âš™ï¸ åŸºç¡€å±æ€§è°ƒæ•´ï¼ˆæ»‘æ¡å·²ä¿®å¤ï¼‰" })

    -- ä¿®å¤åçš„ç§»åŠ¨é€Ÿåº¦æ»‘æ¡ï¼ˆåŒå›è°ƒ+æ˜¾æ€§æ—¥å¿—ï¼‰
    GeneralTab:Slider({
        Title = "ç§»åŠ¨é€Ÿåº¦",
        Min = 16,
        Max = 200,
        Default = Global.sliderValues.WalkSpeed,
        Color = ColorSequence.new(Color3.new(0, 1, 1), Color3.new(0, 0.5, 1)), -- æ¸å˜æ»‘æ¡
        Increment = 1,
        ValueName = "Speed",
        -- åŒå›è°ƒç¡®ä¿å…¼å®¹æ‰€æœ‰WindUIç‰ˆæœ¬
        Callback = function(value)
            Global.sliderValues.WalkSpeed = value
            Global.currentWalkSpeed = value
            local char = waitForCharacter()
            if char and char:FindFirstChildOfClass("Humanoid") then
                char.Humanoid.WalkSpeed = value
                print("[wè„šæœ¬] ç§»åŠ¨é€Ÿåº¦è®¾ç½®ä¸º: " .. value)
            end
        end,
        OnValueChanged = function(value)
            Global.sliderValues.WalkSpeed = value
            Global.currentWalkSpeed = value
            local char = waitForCharacter()
            if char and char:FindFirstChildOfClass("Humanoid") then
                char.Humanoid.WalkSpeed = value
            end
        end,
        Draggable = true,
        Interactable = true,
        Visible = true
    })

    -- ä¿®å¤åçš„è·³è·ƒé«˜åº¦æ»‘æ¡ï¼ˆåŒä¸Šï¼‰
    GeneralTab:Slider({
        Title = "è·³è·ƒé«˜åº¦",
        Min = 50,
        Max = 200,
        Default = Global.sliderValues.JumpPower,
        Color = ColorSequence.new(Color3.new(1, 0, 1), Color3.new(0.5, 0, 1)),
        Increment = 1,
        ValueName = "Power",
        Callback = function(value)
            Global.sliderValues.JumpPower = value
            Global.currentJumpPower = value
            local char = waitForCharacter()
            if char and char:FindFirstChildOfClass("Humanoid") then
                char.Humanoid.JumpPower = value
                print("[wè„šæœ¬] è·³è·ƒé«˜åº¦è®¾ç½®ä¸º: " .. value)
            end
        end,
        OnValueChanged = function(value)
            Global.sliderValues.JumpPower = value
            Global.currentJumpPower = value
            local char = waitForCharacter()
            if char and char:FindFirstChildOfClass("Humanoid") then
                char.Humanoid.JumpPower = value
            end
        end,
        Draggable = true,
        Interactable = true,
        Visible = true
    })

    -- ä¿ç•™åŸæœ‰åŠŸèƒ½ï¼ˆå¤œè§†ã€ç©¿å¢™ã€æ— æ•Œç­‰ï¼Œæ·»åŠ æ—¥å¿—ï¼‰
    GeneralTab:Toggle({
        Title = "å¤œè§†æ¨¡å¼",
        Default = Global.nightVisionEnabled,
        Callback = function(state)
            Global.nightVisionEnabled = state
            Lighting.Ambient = state and Color3.new(0.8, 0.8, 0.8) or Color3.new(0.1, 0.1, 0.1)
            Lighting.OutdoorAmbient = state and Color3.new(0.6, 0.6, 0.6) or Color3.new(0.2, 0.2, 0.2)
            print("[wè„šæœ¬] å¤œè§†æ¨¡å¼: " .. tostring(state))
        end
    })

    GeneralTab:Toggle({
        Title = "ç©¿å¢™æ¨¡å¼",
        Default = false,
        Callback = function(state)
            if state then
                Global.noclipConnection = RunService.Stepped:Connect(function()
                    local char = LocalPlayer.Character
                    if char then
                        for _, part in pairs(char:GetChildren()) do
                            if part:IsA("BasePart") then part.CanCollide = false end
                        end
                    end
                end)
            else
                if Global.noclipConnection then Global.noclipConnection:Disconnect() end
                local char = LocalPlayer.Character
                if char then
                    for _, part in pairs(char:GetChildren()) do
                        if part:IsA("BasePart") then part.CanCollide = true end
                    end
                end
            end
            print("[wè„šæœ¬] ç©¿å¢™æ¨¡å¼: " .. tostring(state))
        end
    })

    -- å…¶ä»–åŠŸèƒ½ï¼ˆæ— æ•Œã€ä¼ é€ã€è·³å¢™ç­‰ï¼‰ä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ·»åŠ æ‰§è¡Œæ—¥å¿—...
    GeneralTab:Button({
        Title = "æ— æ•Œæ¨¡å¼",
        Callback = function()
            Global.godmodeEnabled = not Global.godmodeEnabled
            local char = waitForCharacter()
            if char and char:FindFirstChildOfClass("Humanoid") then
                if Global.godmodeEnabled then
                    char.Humanoid.MaxHealth = math.huge
                    char.Humanoid.Health = math.huge
                    WindUI:Notify({ Title = "âœ… æˆåŠŸ", Content = "æ— æ•Œæ¨¡å¼å·²æ¿€æ´»", Duration = 2 })
                else
                    char.Humanoid.MaxHealth = 100
                    char.Humanoid.Health = 100
                    WindUI:Notify({ Title = "âŒ å…³é—­", Content = "æ— æ•Œæ¨¡å¼å·²å…³é—­", Duration = 2 })
                end
                print("[wè„šæœ¬] æ— æ•Œæ¨¡å¼: " .. tostring(Global.godmodeEnabled))
            end
        end
    })

    -- è·³å¢™æ¨¡å¼ã€ç¬¬ä¸‰æ–¹è„šæœ¬ã€å¨±ä¹åŠŸèƒ½ã€æ¸¸æˆä¸“å±Tab å‡ä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ·»åŠ æ‰§è¡Œæ—¥å¿—...

    -- ä¿æ´»é€»è¾‘ï¼ˆå¢å¼ºæ£€æµ‹ï¼‰
    spawn(function()
        while true do
            task.wait(2)
            if Global.MainWindow and not Global.MainWindow:IsVisible() then
                Global.MainWindow:Show()
            end
            local openButton = CoreGui:FindFirstChild("WindUI_OpenButton")
            if not openButton then openButton = createOpenButton() end
            if not Global.rainbowAnimationConnection or not Global.rainbowAnimationConnection.Connected then
                startRainbowAnimation(openButton)
            end
        end
    end)

    -- æœ€ç»ˆåŠ è½½æˆåŠŸæç¤ºï¼ˆå¼¹çª—+æ—¥å¿—ï¼‰
    WindUI:Notify({
        Title = "ğŸ‰ åŠ è½½å®Œæˆ",
        Content = "æ»‘æ¡å·²ä¿®å¤+UIç¾åŒ–ç”Ÿæ•ˆ\nå¯æ­£å¸¸æ‹–åŠ¨æ»‘æ¡è°ƒæ•´å±æ€§",
        Duration = 5,
        TextColor3 = Color3.new(0, 1, 0)
    })
    print("[wè„šæœ¬] æ‰€æœ‰åŠŸèƒ½åŠ è½½å®Œæˆï¼Œå¯æ­£å¸¸ä½¿ç”¨")
end
