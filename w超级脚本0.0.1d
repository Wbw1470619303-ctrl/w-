-- Delta é€‚é…ï¼šç®€åŒ–å…¨å±€å˜é‡ï¼ˆé¿å… Delta æ³¨å…¥å™¨é™åˆ¶ï¼‰
local Global = {
    WindUI = nil,
    MainWindow = nil,
    noclipConnection = nil,
    nightVisionEnabled = false,
    currentWalkSpeed = 16,
    currentJumpPower = 50,
    godmodeEnabled = false,
    autoswingEnabled = false,
    wallhopConnection = nil, -- æ–°å¢ï¼šè·³å¢™åŠŸèƒ½è¿æ¥å­˜å‚¨
    rainbowAnimationConnection = nil, -- æ–°å¢ï¼šå½©è™¹åŠ¨ç”»è¿æ¥å­˜å‚¨
    flyConnection = nil, -- æ–°å¢ï¼šé£è¡ŒåŠŸèƒ½è¿æ¥å­˜å‚¨ï¼ˆDelta ä¿æ´»ç”¨ï¼‰
    creatorTagInstances = {}, -- æ–°å¢ï¼šå­˜å‚¨åˆ¶ä½œè€…æ ‡ç­¾å®ä¾‹ï¼Œä¾¿äºç®¡ç†
    welcomeSent = false -- æ–°å¢ï¼šæ ‡è®°æ˜¯å¦å·²å‘é€æ¬¢è¿ä¿¡æ¯ï¼Œé¿å…é‡å¤
}

-- Delta å…¼å®¹ï¼šæ¡†æ¶åŠ è½½ï¼ˆæ›¿æ¢ä¸º Delta æ”¯æŒçš„ HttpGet æ–¹å¼ï¼‰
local success, WindUI = pcall(function()
    local framework = game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua")
    return loadstring(framework)()
end)

if not success then
    -- Delta é€‚é…ï¼šä½¿ç”¨åŸç”Ÿé€šçŸ¥ï¼ˆé¿å… SetCore å…¼å®¹æ€§é—®é¢˜ï¼‰
    local notification = Instance.new("ScreenGui")
    notification.Name = "LoadFailNotice"
    notification.Parent = game.Players.LocalPlayer.PlayerGui
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.fromOffset(300, 80)
    textLabel.Position = UDim2.fromScale(0.5, 0.1)
    textLabel.AnchorPoint = Vector2.new(0.5, 0.5)
    textLabel.BackgroundColor3 = Color3.new(0, 0, 0)
    textLabel.TextColor3 = Color3.new(1, 0, 0)
    textLabel.Text = "WindUI æ¡†æ¶åŠ è½½å¤±è´¥\nè¯·æ£€æŸ¥ç½‘ç»œæˆ–æ›´æ–° Delta æ³¨å…¥å™¨"
    textLabel.TextWrapped = true
    textLabel.Parent = notification
    task.wait(5)
    notification:Destroy()
    return
end

Global.WindUI = WindUI

-- é¢„åŠ è½½æ‰€æœ‰å¿…éœ€æœåŠ¡ï¼ˆDelta æ³¨å…¥å™¨éœ€æ˜¾å¼è·å–ï¼‰
local LocalPlayer = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local MarketplaceService = game:GetService("MarketplaceService")
local CoreGui = game:GetService("CoreGui") -- é¢„åŠ è½½ CoreGui ç”¨äºæ‚¬æµ®çª—ç»‘å®š
local Players = game:GetService("Players") -- å•ç‹¬é¢„åŠ è½½ Players æœåŠ¡ï¼Œé¿å…è·å–å¤±è´¥
local Confirmed = false

-- è§’è‰²åŠ è½½æ£€æµ‹å‡½æ•°ï¼ˆDelta é€‚é…ï¼šå¢åŠ è¶…æ—¶å¤„ç†ï¼‰
local function waitForCharacter()
    local timeout = 0
    while not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") do
        task.wait(0.1)
        timeout += 0.1
        if timeout >= 10 then -- 10ç§’è¶…æ—¶
            return nil
        end
    end
    return LocalPlayer.Character
end

-- æ–°å¢ï¼šå½©è™¹è‰²ç”Ÿæˆå‡½æ•°ï¼ˆé€šè¿‡è‰²ç›¸å¾ªç¯å®ç°ï¼‰
local function getRainbowColor(hueOffset)
    local hue = (tick() * 0.2 + hueOffset) % 1 -- 0.2 æ§åˆ¶å˜è‰²é€Ÿåº¦ï¼Œå€¼è¶Šå¤§è¶Šå¿«
    return Color3.fromHSV(hue, 0.8, 0.9) -- é¥±å’Œåº¦0.8ã€æ˜åº¦0.9ï¼Œé¢œè‰²æ›´é²œè‰³
end

-- æ–°å¢ï¼šå¯åŠ¨å°çª—å½©è™¹åŠ¨ç”»
local function startRainbowAnimation(openButton)
    -- å…ˆå…³é—­å·²æœ‰åŠ¨ç”»ï¼Œé¿å…é‡å¤
    if Global.rainbowAnimationConnection then
        Global.rainbowAnimationConnection:Disconnect()
    end

    -- æ¯å¸§æ›´æ–°é¢œè‰²ï¼ˆä½¿ç”¨ RenderStepped ç¡®ä¿UIåŒæ­¥ï¼‰
    Global.rainbowAnimationConnection = RunService.RenderStepped:Connect(function()
        if openButton and openButton.Parent then
            -- ç”Ÿæˆå½©è™¹æ¸å˜ï¼ˆä¸¤ç§ç›¸é‚»å½©è™¹è‰²ï¼Œè®©å…‰åœˆæœ‰æ¸å˜å…‰æ³½ï¼‰
            local color1 = getRainbowColor(0)
            local color2 = getRainbowColor(0.1) -- åç§»è‰²ç›¸ï¼Œå½¢æˆæ¸å˜
            openButton.Color = ColorSequence.new(color1, color2)
        else
            -- å°çª—ä¸å­˜åœ¨æ—¶æ–­å¼€åŠ¨ç”»
            Global.rainbowAnimationConnection:Disconnect()
            Global.rainbowAnimationConnection = nil
        end
    end)
end

-- ==================== ä¿®å¤ï¼šåˆ¶ä½œè€…æ ‡ç­¾åˆ›å»ºå‡½æ•°ï¼ˆDelta é€‚é…ä¼˜åŒ–ï¼‰ ====================
local function createCreatorTag(player)
    -- å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿ç©å®¶æœ‰æ•ˆä¸”ä¸æ˜¯æœ¬åœ°ç©å®¶
    if not player or player == LocalPlayer or not player:IsDescendantOf(Players) then
        WindUI:Notify({ Title = "è°ƒè¯•", Content = "æ— æ•ˆç©å®¶æˆ–æœ¬åœ°ç©å®¶ï¼Œè·³è¿‡æ ‡ç­¾åˆ›å»º", Duration = 2 })
        return
    end

    -- å¼ºåˆ¶ç­‰å¾…è§’è‰²åŠ è½½ï¼ˆå¢åŠ è¶…æ—¶æç¤ºï¼Œä¾¿äºè°ƒè¯•ï¼‰
    local char = player.Character or player.CharacterAdded:Wait(15)
    if not char then
        WindUI:Notify({ Title = "è°ƒè¯•", Content = "ç©å®¶ " .. player.Name .. " è§’è‰²åŠ è½½è¶…æ—¶", Duration = 3 })
        return
    end

    -- ç­‰å¾… HumanoidRootPart åŠ è½½ï¼ˆå»¶é•¿è¶…æ—¶æ—¶é—´ï¼Œé€‚é…æ…¢åŠ è½½åœºæ™¯ï¼‰
    local humanoidRootPart = char:WaitForChild("HumanoidRootPart", 15)
    if not humanoidRootPart then
        WindUI:Notify({ Title = "è°ƒè¯•", Content = "ç©å®¶ " .. player.Name .. " ç¼ºå°‘ HumanoidRootPart", Duration = 3 })
        return
    end

    -- ç§»é™¤æ—§æ ‡ç­¾ï¼ˆé¿å…é‡å¤ï¼‰
    if Global.creatorTagInstances[player.UserId] then
        pcall(function() Global.creatorTagInstances[player.UserId]:Destroy() end)
    end

    -- Delta é€‚é…ï¼šä¼˜åŒ– UI åˆ›å»ºé€»è¾‘ï¼Œæé«˜æ¸²æŸ“æˆåŠŸç‡
    local success, billboardGui = pcall(function()
        local bg = Instance.new("BillboardGui")
        bg.Name = "CreatorTag"
        bg.Adornee = humanoidRootPart
        bg.Size = UDim2.fromOffset(250, 60) -- å¢å¤§å°ºå¯¸ï¼Œæé«˜å¯è§æ€§
        bg.AlwaysOnTop = true
        bg.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        bg.Parent = CoreGui -- æ”¹ä¸ºç»‘å®š CoreGuiï¼Œé¿å…è§’è‰²é”€æ¯æ—¶æ ‡ç­¾æ¶ˆå¤±
        bg.MaxDistance = 500 -- å¢åŠ æœ€å¤§æ˜¾ç¤ºè·ç¦»ï¼Œè¿œè·ç¦»ä¹Ÿèƒ½çœ‹åˆ°

        -- æ ‡ç­¾èƒŒæ™¯ï¼ˆä¼˜åŒ–å±‚çº§å’Œé€æ˜åº¦ï¼‰
        local background = Instance.new("Frame")
        background.Size = UDim2.fromScale(1, 1)
        background.BackgroundColor3 = Color3.new(0, 0, 0)
        background.BackgroundTransparency = 0.2 -- åŠé€æ˜èƒŒæ™¯ï¼Œä¸é®æŒ¡è§†çº¿
        background.BorderColor3 = Color3.new(1, 0.8, 0) -- äº®é‡‘è‰²è¾¹æ¡†ï¼Œæ›´é†’ç›®
        background.BorderSizePixel = 3
        background.CornerRadius = UDim.new(0, 10)
        background.Parent = bg

        -- æ ‡ç­¾æ–‡æœ¬ï¼ˆä¼˜åŒ–å­—ä½“å’Œé¢œè‰²ï¼‰
        local textLabel = Instance.new("TextLabel")
        textLabel.Size = UDim2.fromScale(0.95, 0.95)
        textLabel.Position = UDim2.fromScale(0.025, 0.025)
        textLabel.BackgroundTransparent = true
        textLabel.Text = "wè¶…çº§è„šæœ¬åˆ¶ä½œè€…"
        textLabel.TextColor3 = Color3.new(1, 1, 0)
        textLabel.TextFont = Enum.Font.GothamBold -- æ›´é†’ç›®çš„å­—ä½“
        textLabel.TextSize = 22 -- å¢å¤§å­—ä½“ï¼Œæé«˜å¯è¯»æ€§
        textLabel.TextWrapped = true
        textLabel.TextStrokeColor3 = Color3.new(0, 0, 0) -- å¢åŠ æ–‡å­—æè¾¹ï¼Œé¿å…ä¸èƒŒæ™¯èåˆ
        textLabel.TextStrokeTransparency = 0.5
        textLabel.Parent = background

        -- æ–°å¢ï¼šå½©è™¹åŠ¨ç”»æ•ˆæœï¼ˆä¸æ‚¬æµ®çª—é£æ ¼ç»Ÿä¸€ï¼‰
        spawn(function()
            while bg and bg.Parent do
                task.wait(0.1)
                pcall(function()
                    background.BorderColor3 = getRainbowColor(0)
                    textLabel.TextColor3 = getRainbowColor(0.1)
                end)
            end
        end)

        return bg
    end)

    if success and billboardGui then
        Global.creatorTagInstances[player.UserId] = billboardGui
        WindUI:Notify({ Title = "è°ƒè¯•", Content = "å·²ä¸º " .. player.Name .. " æ·»åŠ ä½œè€…æ ‡ç­¾", Duration = 2 })
    else
        WindUI:Notify({ Title = "é”™è¯¯", Content = "ä½œè€…æ ‡ç­¾åˆ›å»ºå¤±è´¥", Duration = 3 })
    end
end

-- ==================== ä¿®å¤ï¼šæ¬¢è¿ä¿¡æ¯å‘é€å‡½æ•°ï¼ˆé€‚é… Delta èŠå¤©æƒé™ï¼‰ ====================
local function sendWelcomeMessage(player)
    -- é¿å…é‡å¤å‘é€ï¼ˆæŒ‰æœåŠ¡å™¨é‡ç½®ï¼Œé‡æ–°åŠ å…¥æ—¶å¯å†æ¬¡å‘é€ï¼‰
    if Global.welcomeSent then return end
    Global.welcomeSent = true

    -- ä¼˜åŒ–èŠå¤©æœåŠ¡è·å–é€»è¾‘ï¼Œå…¼å®¹æ›´å¤šåœºæ™¯
    local success = pcall(function()
        local chatService = ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")
        if not chatService then
            -- å…¼å®¹æ—§ç‰ˆèŠå¤©ç³»ç»Ÿ
            chatService = ReplicatedStorage:FindFirstChild("ChatSystemChatEvents")
        end
        local sayMessageEvent = chatService and chatService:FindFirstChild("SayMessageRequest")
        if sayMessageEvent then
            sayMessageEvent:FireServer("æ¬¢è¿wè¶…çº§è„šæœ¬åˆ¶ä½œè€… @" .. player.Name .. " æ¥åˆ°æ­¤æ¸¸æˆğŸ‰ğŸ‰æ¬¢è¿ä½¿ç”¨ W Super Script Center ğŸ‰ğŸ‰", "All")
        else
            -- å¤‡ç”¨æ–¹æ¡ˆï¼šç›´æ¥é€šè¿‡ç©å®¶å¯¹è±¡å‘é€ï¼ˆå¦‚æœæ”¯æŒï¼‰
            if player:FindFirstChild("PlayerGui") then
                local notifyGui = Instance.new("ScreenGui")
                notifyGui.Name = "WelcomeNotify"
                local notifyText = Instance.new("TextLabel")
                notifyText.Size = UDim2.fromOffset(400, 50)
                notifyText.Position = UDim2.fromScale(0.5, 0.05)
                notifyText.AnchorPoint = Vector2.new(0.5, 0)
                notifyText.BackgroundColor3 = Color3.new(0, 0, 0)
                notifyText.BackgroundTransparency = 0.3
                notifyText.TextColor3 = Color3.new(1, 1, 0)
                notifyText.Text = "æ¬¢è¿wè¶…çº§è„šæœ¬åˆ¶ä½œè€… @" .. player.Name .. " åŠ å…¥æ¸¸æˆï¼"
                notifyText.TextSize = 18
                notifyText.Parent = notifyGui
                notifyGui.Parent = game.Players:GetPlayers()[1].PlayerGui
                task.wait(5)
                notifyGui:Destroy()
            end
        end
    end)

    if not success then
        WindUI:Notify({ Title = "é”™è¯¯", Content = "æ¬¢è¿ä¿¡æ¯å‘é€å¤±è´¥ï¼Œå·²å¯ç”¨æœ¬åœ°é€šçŸ¥", Duration = 3 })
    end
end

-- ==================== ä¿®å¤ï¼šåˆ¶ä½œè€…æ£€æµ‹é€»è¾‘ï¼ˆä¼˜åŒ–è§¦å‘æ—¶æœºå’Œç¨³å®šæ€§ï¼‰ ====================
local function detectCreator()
    -- è°ƒè¯•é€šçŸ¥ï¼šç¡®è®¤åŠŸèƒ½å·²å¯åŠ¨
    WindUI:Notify({ Title = "åŠŸèƒ½å¯åŠ¨", Content = "ä½œè€…è¯†åˆ«åŠŸèƒ½å·²æ¿€æ´»ï¼Œæ­£åœ¨æ£€æµ‹...", Duration = 2 })

    -- æ£€æµ‹å·²å­˜åœ¨çš„ç©å®¶ï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿è§’è‰²åŠ è½½å®Œæˆï¼‰
    spawn(function()
        task.wait(3) -- ç­‰å¾…3ç§’ï¼Œè®©æ‰€æœ‰ç©å®¶è§’è‰²åŠ è½½
        for _, player in ipairs(Players:GetPlayers()) do
            if player.Name == "wbwhnb" and player ~= LocalPlayer then
                createCreatorTag(player)
                sendWelcomeMessage(player)
            end
        end
    end)

    -- æ£€æµ‹æ–°åŠ å…¥çš„ç©å®¶ï¼ˆä¼˜åŒ–è§¦å‘é€»è¾‘ï¼‰
    Players.PlayerAdded:Connect(function(player)
        WindUI:Notify({ Title = "è°ƒè¯•", Content = "æ£€æµ‹åˆ°æ–°ç©å®¶ï¼š" .. player.Name, Duration = 1 })
        if player.Name == "wbwhnb" and player ~= LocalPlayer then
            -- ç­‰å¾…è§’è‰²åŠ è½½å®Œæˆåå†åˆ›å»ºæ ‡ç­¾
            player.CharacterAdded:Wait()
            task.wait(1) -- å»¶è¿Ÿ1ç§’ï¼Œç¡®ä¿è§’è‰²éƒ¨ä»¶åŠ è½½å®Œæˆ
            createCreatorTag(player)
            sendWelcomeMessage(player)
        end
    end)

    -- è§’è‰²é‡ç”Ÿæ—¶é‡æ–°åˆ›å»ºæ ‡ç­¾ï¼ˆä¼˜åŒ–ç»‘å®šé€»è¾‘ï¼‰
    Players.PlayerAdded:Connect(function(player)
        if player.Name == "wbwhnb" and player ~= LocalPlayer then
            player.CharacterAdded:Connect(function(char)
                task.wait(1)
                createCreatorTag(player)
                WindUI:Notify({ Title = "è°ƒè¯•", Content = "ä½œè€…è§’è‰²é‡ç”Ÿï¼Œé‡æ–°åˆ›å»ºæ ‡ç­¾", Duration = 1 })
            end)
        end
    end)
end

-- åˆå§‹å¼¹çª—ï¼ˆDelta é€‚é…ï¼šç®€åŒ–å¼¹çª—å‚æ•°ï¼‰
WindUI:Popup({
    Title = "w è¶…çº§è„šæœ¬",
    IconThemed = true,
    Content = "æ¬¢è¿ä½¿ç”¨ MR é™„å±è„šæœ¬ MR pio\nå½“å‰ç”¨æˆ·: " .. LocalPlayer.Name,
    Buttons = {
        { Title = "å–æ¶ˆ", Callback = function() end },
        { Title = "åŠ è½½è„šæœ¬", Callback = function() Confirmed = true; createMainUI() end }
    }
})

-- ä¸»UIåˆ›å»ºå‡½æ•°ï¼ˆä¿®å¤è¯­æ³•é—­åˆ+Deltaé€‚é…+å½©è™¹å°çª—ï¼‰
function createMainUI()
    -- Delta é€‚é…ï¼šçª—å£å‚æ•°ç®€åŒ–+æ–°å¢æœ€å°åŒ–å›è°ƒ
    local MainWindow = WindUI:CreateWindow({
        Title = "w è¶…çº§è„šæœ¬",
        Icon = "crown",
        Author = "wbwhnb (QQ: 2318995920)",
        Folder = "wSuperScript",
        Size = UDim2.fromOffset(600, 400),
        Theme = "Dark",
        SideBarWidth = 220,
        OnClose = function() MainWindow:Hide() end,
        OnMinimize = function()
            MainWindow:Hide()
            local openButton = CoreGui:FindFirstChild("WindUI_OpenButton")
            if openButton then openButton.Visible = true end
        end,
    })
    Global.MainWindow = MainWindow

    -- çª—å£æŒ‰é’®æ ·å¼ï¼ˆDelta é€‚é…ï¼šç»‘å®š CoreGui+å½©è™¹è‰²åˆå§‹é…ç½®ï¼‰
    local function createOpenButton()
        local openButton = MainWindow:EditOpenButton({
            Title = "w è¶…çº§è„šæœ¬",
            Icon = "crown",
            CornerRadius = UDim.new(0, 10),
            StrokeThickness = 2,
            Color = ColorSequence.new(getRainbowColor(0), getRainbowColor(0.1)),
            Draggable = true,
            Parent = CoreGui,
            ZIndex = 9999,
            Size = UDim2.fromOffset(120, 40),
        })
        startRainbowAnimation(openButton)
        return openButton
    end

    local openButton = createOpenButton()

    -- ==================== ä½œè€…ä¿¡æ¯ Tab ====================
    local AuthorTab = MainWindow:Tab({ Title = "ä½œè€…ä¿¡æ¯", Icon = "user" })
    AuthorTab:Section({ Title = "è„šæœ¬ä½œè€…è¯¦æƒ…" })
    AuthorTab:Paragraph({ Text = "ä½œè€…: wbwhnb" })
    AuthorTab:Paragraph({ Text = "ä½œè€… QQ: 2318995920" })
    AuthorTab:Paragraph({ Text = "è„šæœ¬æ€§è´¨: å…è´¹å¼€æº" })
    AuthorTab:Button({
        Title = "å¤åˆ¶ä½œè€… QQ",
        Callback = function()
            setclipboard("2318995920")
            WindUI:Notify({ Title = "æç¤º", Content = "QQ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿", Duration = 3 })
        end
    })

    -- ==================== é€šç”¨åŠŸèƒ½ Tab ====================
    local GeneralTab = MainWindow:Tab({ Title = "é€šç”¨åŠŸèƒ½", Icon = "settings" })
    GeneralTab:Section({ Title = "åŸºç¡€å±æ€§è°ƒæ•´" })

    -- é€Ÿåº¦è°ƒèŠ‚
    GeneralTab:Slider({
        Title = "ç§»åŠ¨é€Ÿåº¦",
        Min = 16,
        Max = 200,
        Default = Global.currentWalkSpeed,
        Color = Color3.new(0, 1, 1),
        Increment = 1,
        ValueName = "Speed",
        Callback = function(value)
            Global.currentWalkSpeed = value
            local char = waitForCharacter()
            if char then
                local humanoid = char:FindFirstChildOfClass("Humanoid")
                if humanoid then humanoid.WalkSpeed = value end
            end
        end
    })

    -- è·³è·ƒé«˜åº¦è°ƒèŠ‚
    GeneralTab:Slider({
        Title = "è·³è·ƒé«˜åº¦",
        Min = 50,
        Max = 200,
        Default = Global.currentJumpPower,
        Color = Color3.new(1, 0, 1),
        Increment = 1,
        ValueName = "Power",
        Callback = function(value)
            Global.currentJumpPower = value
            local char = waitForCharacter()
            if char then
                local humanoid = char:FindFirstChildOfClass("Humanoid")
                if humanoid then humanoid.JumpPower = value end
            end
        end
    })

    -- å¤œè§†æ¨¡å¼
    GeneralTab:Toggle({
        Title = "å¤œè§†æ¨¡å¼",
        Default = Global.nightVisionEnabled,
        Callback = function(state)
            Global.nightVisionEnabled = state
            if state then
                Lighting.Ambient = Color3.new(0.8, 0.8, 0.8)
                Lighting.OutdoorAmbient = Color3.new(0.6, 0.6, 0.6)
            else
                Lighting.Ambient = Color3.new(0.1, 0.1, 0.1)
                Lighting.OutdoorAmbient = Color3.new(0.2, 0.2, 0.2)
            end
        end
    })

    -- ç©¿å¢™æ¨¡å¼ï¼ˆDelta é€‚é…ï¼šé¿å…è¿æ¥æ³„éœ²ï¼‰
    GeneralTab:Toggle({
        Title = "ç©¿å¢™æ¨¡å¼",
        Default = false,
        Callback = function(state)
            if state then
                if not Global.noclipConnection then
                    Global.noclipConnection = RunService.Stepped:Connect(function()
                        local char = LocalPlayer.Character
                        if char then
                            for _, part in pairs(char:GetChildren()) do
                                if part:IsA("BasePart") then part.CanCollide = false end
                            end
                        end
                    end)
                end
            else
                if Global.noclipConnection then
                    Global.noclipConnection:Disconnect()
                    Global.noclipConnection = nil
                end
                local char = LocalPlayer.Character
                if char then
                    for _, part in pairs(char:GetChildren()) do
                        if part:IsA("BasePart") then part.CanCollide = true end
                    end
                end
            end
        end
    })

    -- æ— æ•Œæ¨¡å¼
    GeneralTab:Button({
        Title = "æ— æ•Œæ¨¡å¼",
        Callback = function()
            Global.godmodeEnabled = not Global.godmodeEnabled
            local char = waitForCharacter()
            if char then
                local humanoid = char:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    if Global.godmodeEnabled then
                        humanoid.MaxHealth = math.huge
                        humanoid.Health = math.huge
                        humanoid:GetPropertyChangedSignal("Health"):Connect(function()
                            if humanoid.Health < math.huge then humanoid.Health = math.huge end
                        end)
                        WindUI:Notify({ Title = "æˆåŠŸ", Content = "æ— æ•Œæ¨¡å¼å·²æ¿€æ´»", Duration = 3 })
                    else
                        humanoid.MaxHealth = 100
                        humanoid.Health = 100
                        WindUI:Notify({ Title = "å…³é—­", Content = "æ— æ•Œæ¨¡å¼å·²å…³é—­", Duration = 3 })
                    end
                end
            else
                WindUI:Notify({ Title = "é”™è¯¯", Content = "è§’è‰²æœªåŠ è½½å®Œæˆ", Duration = 2 })
            end
        end
    })

    -- ç‚¹å‡»ä¼ é€
    GeneralTab:Button({
        Title = "ç‚¹å‡»ä¼ é€",
        Callback = function()
            local tool = Instance.new("Tool")
            tool.RequiresHandle = false
            tool.Name = "[FE] ç‚¹å‡»ä¼ é€å·¥å…·"
            tool.Activated:Connect(function()
                local mouse = LocalPlayer:GetMouse()
                local char = waitForCharacter()
                if mouse.Hit and char and char:FindFirstChild("HumanoidRootPart") then
                    local pos = mouse.Hit.Position + Vector3.new(0, 2.5, 0)
                    char.HumanoidRootPart.CFrame = CFrame.new(pos)
                end
            end)
            tool.Parent = LocalPlayer.Backpack
            WindUI:Notify({ Title = "è·å–", Content = "ä¼ é€å·¥å…·å·²æ”¾å…¥èƒŒåŒ…", Duration = 2 })
        end
    })

    -- æ–°å¢ï¼šè·³å¢™åŠŸèƒ½ï¼ˆDelta é€‚é…ï¼‰
    GeneralTab:Button({
        Title = "è·³å¢™æ¨¡å¼",
        Callback = function()
            if Global.wallhopConnection then
                Global.wallhopConnection:Disconnect()
                Global.wallhopConnection = nil
                WindUI:Notify({ Title = "å…³é—­", Content = "è·³å¢™æ¨¡å¼å·²å…³é—­", Duration = 3 })
                return
            end

            local success, wallhopScript = pcall(function()
                return game:HttpGet("https://raw.githubusercontent.com/ScpGuest666/Random-Roblox-script/refs/heads/main/Roblox%20WallHop%20V4%20script", true)
            end)

            if not success then
                WindUI:Notify({ Title = "åŠ è½½å¤±è´¥", Content = "è·³å¢™è„šæœ¬é“¾æ¥æ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ", Duration = 3 })
                return
            end

            local execSuccess, wallhopFunc = pcall(function()
                local func = loadstring(wallhopScript)
                return func()
            end)

            if execSuccess then
                if typeof(wallhopFunc) == "RBXScriptConnection" then
                    Global.wallhopConnection = wallhopFunc
                else
                    Global.wallhopConnection = Instance.new("BindableEvent").Event:Connect(function() end)
                end
                WindUI:Notify({ Title = "æˆåŠŸ", Content = "è·³å¢™æ¨¡å¼å·²æ¿€æ´»ï¼Œå†æ¬¡ç‚¹å‡»å…³é—­", Duration = 3 })
            else
                WindUI:Notify({ Title = "æ‰§è¡Œå¤±è´¥", Content = "è·³å¢™è„šæœ¬ä¸å…¼å®¹ Delta æˆ–è¯­æ³•é”™è¯¯", Duration = 3 })
            end
        end
    })

    -- ==================== æ–°å¢ï¼šxahub è„šæœ¬ï¼ˆDelta é€‚é…ï¼‰ ====================
    GeneralTab:Section({ Title = "ç¬¬ä¸‰æ–¹è„šæœ¬" })
    GeneralTab:Button({
        Title = "åŠ è½½ xahub",
        Callback = function()
            local success, xahubScript = pcall(function()
                return game:HttpGet("https://pastebin.com/raw/h8nC0fLb", true)
            end)
            if not success then
                WindUI:Notify({ Title = "åŠ è½½å¤±è´¥", Content = "xahub é“¾æ¥æ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ", Duration = 3 })
                return
            end
            local execSuccess = pcall(function() loadstring(xahubScript)() end)
            if execSuccess then
                WindUI:Notify({ Title = "åŠ è½½æˆåŠŸ", Content = "xahub è„šæœ¬å·²æ‰§è¡Œ", Duration = 3 })
            else
                WindUI:Notify({ Title = "æ‰§è¡Œå¤±è´¥", Content = "xahub è„šæœ¬è¯­æ³•é”™è¯¯æˆ–ä¸å…¼å®¹ Delta", Duration = 3 })
            end
        end
    })

    -- ==================== æ–°å¢ï¼šè¶…äººé£è¡Œï¼ˆDelta é€‚é…ï¼‰ ====================
    GeneralTab:Button({
        Title = "è¶…äººé£è¡Œ",
        Callback = function()
            if Global.flyConnection then
                Global.flyConnection:Disconnect()
                Global.flyConnection = nil
                WindUI:Notify({ Title = "å…³é—­", Content = "è¶…äººé£è¡Œå·²å…³é—­", Duration = 3 })
                return
            end

            local success, flyScript = pcall(function()
                return game:HttpGet("https://raw.githubusercontent.com/396abc/Script/refs/heads/main/MobileFly.lua", true)
            end)

            if not success then
                WindUI:Notify({ Title = "åŠ è½½å¤±è´¥", Content = "é£è¡Œè„šæœ¬é“¾æ¥æ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ", Duration = 3 })
                return
            end

            local execSuccess, flyFunc = pcall(function()
                local func = loadstring(flyScript)
                return func()
            end)

            if execSuccess then
                if typeof(flyFunc) == "RBXScriptConnection" then
                    Global.flyConnection = flyFunc
                else
                    Global.flyConnection = Instance.new("BindableEvent").Event:Connect(function() end)
                end
                WindUI:Notify({ Title = "æˆåŠŸ", Content = "è¶…äººé£è¡Œå·²æ¿€æ´»ï¼Œå†æ¬¡ç‚¹å‡»å…³é—­", Duration = 3 })
            else
                WindUI:Notify({ Title = "æ‰§è¡Œå¤±è´¥", Content = "é£è¡Œè„šæœ¬ä¸å…¼å®¹ Delta æˆ–è¯­æ³•é”™è¯¯", Duration = 3 })
            end
        end
    })

    -- ==================== å¨±ä¹åŠŸèƒ½ Tab ====================
    local FunTab = MainWindow:Tab({ Title = "å¨±ä¹åŠŸèƒ½", Icon = "emoji" })
    FunTab:Button({
        Title = "è“å±ç‰¹æ•ˆ",
        Callback = function()
            local success = pcall(function()
                loadstring(game:HttpGet("https://github.com/RunDTM/roblox-bluescreen/raw/main/bsod.lua"))()
            end)
            if success then
                WindUI:Notify({ Title = "å¼€å¯", Content = "è“å±ç‰¹æ•ˆå·²æ¿€æ´»ï¼ˆå¤§é€€å…³é—­ï¼‰", Duration = 3 })
            else
                WindUI:Notify({ Title = "å¤±è´¥", Content = "è“å±è„šæœ¬é“¾æ¥å¤±æ•ˆ", Duration = 3 })
            end
        end
    })
    FunTab:Button({
        Title = "è‡ªæ€",
        Callback = function()
            local char = waitForCharacter()
            if char then
                local humanoid = char:FindFirstChildOfClass("Humanoid")
                if humanoid then humanoid.Health = 0 end
            end
        end
    })

    -- ==================== DOORS ä¸“å± Tab ====================
    local DoorsTab = MainWindow:Tab({ Title = "DOORS", Icon = "door-open" })
    DoorsTab:Section({ Title = "æ ¸å¿ƒåŠŸèƒ½" })
    DoorsTab:Button({
        Title = "æœ€å¼ºæ±‰åŒ–è„šæœ¬",
        Callback = function()
            local success = pcall(function() loadstring(game:HttpGet("https://pastebin.com/raw/65TwT8ja"))() end)
            WindUI:Notify({
                Title = success and "åŠ è½½æˆåŠŸ" or "åŠ è½½å¤±è´¥",
                Content = success and "DOORS æ±‰åŒ–è„šæœ¬å·²æ‰§è¡Œ" or "è„šæœ¬é“¾æ¥å¤±æ•ˆï¼Œè¯·æ›´æ¢",
                Duration = 3
            })
        end
    })
    DoorsTab:Button({
        Title = "é—¨ç»˜å›¾æ˜¾ç¤º",
        Callback = function()
            local success = pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/cbhlyy/lyycbh/main/doors1"))() end)
            WindUI:Notify({
                Title = success and "åŠ è½½æˆåŠŸ" or "åŠ è½½å¤±è´¥",
                Content = success and "é—¨ç»˜å›¾æ˜¾ç¤ºå·²å¼€å¯" or "è„šæœ¬é“¾æ¥å¤±æ•ˆï¼Œè¯·æ›´æ¢",
                Duration = 3
            })
        end
    })
    DoorsTab:Button({
        Title = "é“å…·å¸é“çŸ³",
        Callback = function()
            local success = pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/MrNeRD0/Doors-Hack/main/MagnetByNerd.lua"))() end)
            WindUI:Notify({
                Title = success and "åŠ è½½æˆåŠŸ" or "åŠ è½½å¤±è´¥",
                Content = success and "å¸é“çŸ³åŠŸèƒ½å·²æ¿€æ´»" or "è„šæœ¬é“¾æ¥å¤±æ•ˆï¼Œè¯·æ›´æ¢",
                Duration = 3
            })
        end
    })
    DoorsTab:Button({
        Title = "è·å–éª·é«…é’¥åŒ™",
        Callback = function()
            local success = pcall(function()
                local item = game:GetObjects("rbxassetid://11697889137")[1]
                item.Parent = LocalPlayer.Backpack
            end)
            WindUI:Notify({
                Title = success and "æˆåŠŸ" or "å¤±è´¥",
                Content = success and "éª·é«…é’¥åŒ™å·²æ”¾å…¥èƒŒåŒ…" or "é’¥åŒ™IDå¤±æ•ˆ",
                Duration = 3
            })
        end
    })

    -- ==================== åŠ›é‡ä¼ å¥‡ ä¸“å± Tab ====================
    local MuscleLegendsTab = MainWindow:Tab({ Title = "åŠ›é‡ä¼ å¥‡", Icon = "dumbbell" })
    MuscleLegendsTab:Section({ Title = "è„šæœ¬åŠŸèƒ½" })
    MuscleLegendsTab:Button({
        Title = "æ¯è„šæœ¬",
        Callback = function()
            local success = pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/zuohongjian/bjb/main/llcq"))() end)
            WindUI:Notify({
                Title = success and "åŠ è½½æˆåŠŸ" or "åŠ è½½å¤±è´¥",
                Content = success and "æ¯è„šæœ¬å·²æ‰§è¡Œ" or "è„šæœ¬é“¾æ¥å¤±æ•ˆ",
                Duration = 3
            })
        end
    })
    MuscleLegendsTab:Button({
        Title = "Speed Hub X",
        Callback = function()
            local success = pcall(function() loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ahmadsgamer2/Script--Game/main/Muscle-Legends"))() end)
            WindUI:Notify({
                Title = success and "åŠ è½½æˆåŠŸ" or "åŠ è½½å¤±è´¥",
                Content = success and "Speed Hub X å·²æ‰§è¡Œ" or "è„šæœ¬é“¾æ¥å¤±æ•ˆ",
                Duration = 3
            })
        end
    })
    MuscleLegendsTab:Section({ Title = "å¿«é€Ÿä¼ é€" })
    MuscleLegendsTab:Button({
        Title = "å‡ºç”Ÿç‚¹",
        Callback = function()
            local char = waitForCharacter()
            if char then char.HumanoidRootPart.CFrame = CFrame.new(7, 3, 108) end
        end
    })
    MuscleLegendsTab:Button({
        Title = "å†°éœœå¥èº«æˆ¿",
        Callback = function()
            local char = waitForCharacter()
            if char then char.HumanoidRootPart.CFrame = CFrame.new(-2543, 13, -410) end
        end
    })
    MuscleLegendsTab:Button({
        Title = "ç¥è¯å¥èº«æˆ¿",
        Callback = function()
            local char = waitForCharacter()
            if char then char.HumanoidRootPart.CFrame = CFrame.new(2177, 13, 1070) end
        end
    })

    -- ==================== å¿è€…ä¼ å¥‡ ä¸“å± Tab ====================
    local NinjaLegendsTab = MainWindow:Tab({ Title = "å¿è€…ä¼ å¥‡", Icon = "shuriken" })
    NinjaLegendsTab:Section({ Title = "è‡ªåŠ¨åŠŸèƒ½" })
    NinjaLegendsTab:Toggle({
        Title = "è‡ªåŠ¨æŒ¥èˆ",
        Default = false,
        Callback = function(state)
            Global.autoswingEnabled = state
            if state then
                spawn(function()
                    while Global.autoswingEnabled do
                        task.wait()
                        if LocalPlayer:FindFirstChild("ninjaEvent") then
                            LocalPlayer.ninjaEvent:FireServer("swingKatana")
                        else
                            Global.autoswingEnabled = false
                            WindUI:Notify({ Title = "é”™è¯¯", Content = "æœªæ‰¾åˆ°å¿è€…ä¼ å¥‡äº‹ä»¶", Duration = 3 })
                            break
                        end
                    end
                end)
                WindUI:Notify({ Title = "æˆåŠŸ", Content = "è‡ªåŠ¨æŒ¥èˆå·²æ¿€æ´»", Duration = 3 })
            else
                WindUI:Notify({ Title = "å…³é—­", Content = "è‡ªåŠ¨æŒ¥èˆå·²å…³é—­", Duration = 3 })
            end
        end
    })

    local autosellEnabled = false
    NinjaLegendsTab:Toggle({
        Title = "è‡ªåŠ¨å”®å–",
        Default = false,
        Callback = function(state)
            autosellEnabled = state
            if state then
                spawn(function()
                    while autosellEnabled do
                        task.wait(0.1)
                        local char = waitForCharacter()
                        if char then
                            local sellArea = Workspace:FindFirstChild("sellAreaCircles")
                            if sellArea and sellArea:FindFirstChild("sellAreaCircle7") then
                                local circleInner = sellArea.sellAreaCircle7:FindFirstChild("circleInner")
                                if circleInner then
                                    circleInner.CFrame = char.HumanoidRootPart.CFrame
                                    task.wait(0.1)
                                    circleInner.CFrame = Workspace:FindFirstChild("Part") and Workspace.Part.CFrame or char.HumanoidRootPart.CFrame
                                end
                            end
                        end
                    end
                end)
                WindUI:Notify({ Title = "æˆåŠŸ", Content = "è‡ªåŠ¨å”®å–å·²æ¿€æ´»", Duration = 3 })
            else
                WindUI:Notify({ Title = "å…³é—­", Content = "è‡ªåŠ¨å”®å–å·²å…³é—­", Duration = 3 })
            end
        end
    })

    -- ==================== Delta ä¸“å±ä¿æ´»é€»è¾‘ï¼ˆå«å½©è™¹å°çª—ä¿æ´»ï¼‰ ====================
    spawn(function()
        while true do
            task.wait(3)
            -- 1. æ‚¬æµ®çª—ä¿æ´»
            if Global.MainWindow then
                local openButton = CoreGui:FindFirstChild("WindUI_OpenButton")
                if not openButton then
                    openButton = createOpenButton()
                else
                    openButton.Visible = true
                    if not Global.rainbowAnimationConnection or not Global.rainbowAnimationConnection.Connected then
                        startRainbowAnimation(openButton)
                    end
                end
            end

            -- 2. è§’è‰²å±æ€§æ¢å¤
            LocalPlayer.CharacterAdded:Connect(function(newChar)
                task.wait(1)
                local humanoid = newChar:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.WalkSpeed = Global.currentWalkSpeed
                    humanoid.JumpPower = Global.currentJumpPower
                    if Global.godmodeEnabled then
                        humanoid.MaxHealth = math.huge
                        humanoid.Health = math.huge
                    end
                end
                if Global.noclipConnection then
                    for _, part in pairs(newChar:GetChildren()) do
                        if part:IsA("BasePart") then part.CanCollide = false end
                    end
                end
            end)

            -- 3. åŠŸèƒ½ä¿æ´»
            if Global.wallhopConnection and not Global.wallhopConnection.Connected then
                Global.wallhopConnection = nil
            end
            if Global.flyConnection and not Global.flyConnection.Connected then
                Global.flyConnection = nil
            end

            -- ä¿®å¤ï¼šä½œè€…æ ‡ç­¾ä¿æ´»ï¼ˆé‡ç‚¹ä¼˜åŒ–ï¼‰
            for _, player in ipairs(Players:GetPlayers()) do
                if player.Name == "wbwhnb" and player ~= LocalPlayer then
                    local char = player.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        local tag = CoreGui:FindFirstChild("CreatorTag")
                        if not tag then
                            task.wait(0.5)
                            createCreatorTag(player)
                        end
                    end
                end
            end
        end
    end)

    -- ==================== å¯åŠ¨ä½œè€…æ£€æµ‹åŠŸèƒ½ï¼ˆä¼˜åŒ–æ‰§è¡Œæ—¶æœºï¼‰ ====================
    spawn(function()
        task.wait(2) -- å»¶è¿Ÿå¯åŠ¨ï¼Œç¡®ä¿è„šæœ¬åŠ è½½å®Œæˆ
        local success = pcall(detectCreator)
        if not success then
            WindUI:Notify({ Title = "é”™è¯¯", Content = "ä½œè€…è¯†åˆ«åŠŸèƒ½å¯åŠ¨å¤±è´¥", Duration = 3 })
        end
    end)

    -- åŠ è½½æˆåŠŸé€šçŸ¥
    WindUI:Notify({
        Title = "åŠ è½½æˆåŠŸ",
        Content = "å½©è™¹å°çª—å·²æ¿€æ´»ï¼Œä½œè€…è¯†åˆ«åŠŸèƒ½å·²å¯åŠ¨",
        Duration = 3
    })
end
